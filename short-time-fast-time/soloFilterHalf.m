function y = doFilter(x)
%DOFILTER Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 9.8 and DSP System Toolbox 9.10.
% Generated on: 10-Feb-2021 17:34:46

%#codegen

% To generate C/C++ code from this function use the codegen command.
% Type 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    %
    % Fstop1 = 200;    % First Stopband Frequency
    % Fpass1 = 225;    % First Passband Frequency
    % Fpass2 = 650;    % Second Passband Frequency
    % Fstop2 = 750;    % Second Stopband Frequency
    % Astop1 = 50;     % First Stopband Attenuation (dB)
    % Apass  = 1;      % Passband Ripple (dB)
    % Astop2 = 30;     % Second Stopband Attenuation (dB)
    % Fs     = 48000;  % Sampling Frequency
    %
    % h = fdesign.bandpass('fst1,fp1,fp2,fst2,ast1,ap,ast2', Fstop1, Fpass1, ...
    %                      Fpass2, Fstop2, Astop1, Apass, Astop2, Fs);
    %
    % Hd = design(h, 'butter', ...
    %     'MatchExactly', 'stopband', ...
    %     'SystemObject', true);
    
    Hd = dsp.BiquadFilter( ...
        'Structure', 'Direct form II', ...
        'SOSMatrix', [1 0 -1 1 -1.98801500301447 0.995401252365282; 1 0 -1 1 ...
        -1.99759328097126 0.998440262934268; 1 0 -1 1 -1.97906176450405 ...
        0.986350249818185; 1 0 -1 1 -1.99446259420108 0.995315720069274; 1 0 -1 ...
        1 -1.97049884686605 0.977628273335571; 1 0 -1 1 -1.99129669918297 ...
        0.992163681710883; 1 0 -1 1 -1.96247735240642 0.969389540743869; 1 0 -1 ...
        1 -1.98806960549891 0.988958714972967; 1 0 -1 1 -1.9551403256976 ...
        0.961780939134939; 1 0 -1 1 -1.9847538787135 0.98567430136211; 1 0 -1 1 ...
        -1.94862267670946 0.954941932586547; 1 0 -1 1 -1.98132018730871 ...
        0.982282461528917; 1 0 -1 1 -1.94305104587258 0.949004452710671; 1 0 -1 ...
        1 -1.97773712094701 0.978753690116035; 1 0 -1 1 -1.93854322822178 ...
        0.944092407173125; 1 0 -1 1 -1.97397162352701 0.975057552845215; 1 0 -1 ...
        1 -1.9699907330999 0.971164642575862; 1 0 -1 1 -1.93520642509118 ...
        0.940320098313144; 1 0 -1 1 -1.96576593832487 0.967051189922556; 1 0 -1 ...
        1 -1.93313297586425 0.937788228359993; 1 0 -1 1 -1.96128238437133 ...
        0.962708493050838; 1 0 -1 1 -1.93239130196983 0.936575224633563; 1 0 -1 ...
        1 -1.95655596794215 0.958160015783179; 1 0 -1 1 -1.93300899235624 ...
        0.936720726697293; 1 0 -1 1 -1.95166017446747 0.95348761760138; 1 0 -1 1 ...
        -1.93494615067911 0.93819905052481; 1 0 -1 1 -1.94675719804361 ...
        0.948860947111836; 1 0 -1 1 -1.93806444161923 0.940887436856195; 1 0 -1 ...
        1 -1.94211258165001 0.944549176951007], ...
        'ScaleValues', [0.028460574471548; 0.028460574471548; ...
        0.0283739497675059; 0.0283739497675059; 0.0282896170486246; ...
        0.0282896170486246; 0.0282085003998277; 0.0282085003998277; ...
        0.0281314648362119; 0.0281314648362119; 0.0280593104861964; ...
        0.0280593104861964; 0.0279927681225701; 0.0279927681225701; ...
        0.0279324958617095; 0.0279324958617095; 0.0278790768413229; ...
        0.0278790768413229; 0.0278330176873009; 0.0278330176873009; ...
        0.0277947475887316; 0.0277947475887316; 0.0277646178150362; ...
        0.0277646178150362; 0.0277429015288973; 0.0277429015288973; ...
        0.0277297937717976; 0.0277297937717976; 0.0277254115244966; 1]);
end

s = double(x);
y = step(Hd,s);

