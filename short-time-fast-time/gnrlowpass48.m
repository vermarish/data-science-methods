function y = gnrlowpass48(x)
%DOFILTER Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 9.8 and DSP System Toolbox 9.10.
% Generated on: 10-Feb-2021 15:09:43

%#codegen

% To generate C/C++ code from this function use the codegen command.
% Type 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    %
    % Fpass = 950;    % Passband Frequency
    % Fstop = 1050;   % Stopband Frequency
    % Apass = 1;      % Passband Ripple (dB)
    % Astop = 30;     % Stopband Attenuation (dB)
    % Fs    = 48000;  % Sampling Frequency
    %
    % h = fdesign.lowpass('fp,fst,ap,ast', Fpass, Fstop, Apass, Astop, Fs);
    %
    % Hd = design(h, 'butter', ...
    %     'MatchExactly', 'stopband', ...
    %     'SystemObject', true);
    
    Hd = dsp.BiquadFilter( ...
        'Structure', 'Direct form II', ...
        'SOSMatrix', [1 2 1 1 -1.97466284727406 0.990600286548679; 1 2 1 1 ...
        -1.95632536848088 0.972114806563741; 1 2 1 1 -1.93847509116368 ...
        0.954120460241966; 1 2 1 1 -1.92119185259571 0.936697729220625; 1 2 1 1 ...
        -1.90454821886639 0.919919765267672; 1 2 1 1 -1.8886097484062 ...
        0.903852655933539; 1 2 1 1 -1.87343531883007 0.888555754032459; 1 2 1 1 ...
        -1.85907749933776 0.874082053048491; 1 2 1 1 -1.84558295278325 ...
        0.860478592449971; 1 2 1 1 -1.83299285348195 0.847786878868872; 1 2 1 1 ...
        -1.82134330876833 0.836043311060775; 1 2 1 1 -1.81066577417361 ...
        0.825279598433459; 1 2 1 1 -1.80098745381356 0.815523164666239; 1 2 1 1 ...
        -1.79233167912762 0.806797529505828; 1 2 1 1 -1.7847182604756 ...
        0.799122663200798; 1 2 1 1 -1.77816380727353 0.792515309221253; 1 2 1 1 ...
        -1.77268201333993 0.786989271908051; 1 2 1 1 -1.76828390493967 ...
        0.782555666518701; 1 2 1 1 -1.7649780496723 0.779223129801552; 1 2 1 1 ...
        -1.76277072487294 0.776997989755917; 1 2 1 1 -1.76166604460053 ...
        0.775884393645142], ...
        'ScaleValues', [0.00398435981865421; 0.00394735952071483; ...
        0.00391134226957109; 0.00387646915622848; 0.00384288660032074; ...
        0.0038107268818351; 0.00378010880059779; 0.00375113842768193; ...
        0.00372390991667967; 0.00369850634672938; 0.00367500057311003; ...
        0.00365345606496261; 0.00363392771316935; 0.00361646259455146; ...
        0.0036011006813005; 0.00358787548692993; 0.00357681464203008; ...
        0.0035679403947568; 0.00356127003231401; 0.00355681622074339; ...
        0.00355458726115368; 1]);
end

s = double(x);
y = step(Hd,s);

